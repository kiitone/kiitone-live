<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Details | KIIT ONE</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Compact Sidebar for this page */
        .sidebar { width: 80px; padding: 20px 10px; align-items: center; }
        .logo-text, .nav-label, .nav-menu a { display: none; } 
        .nav-menu a i { font-size: 1.5rem; margin: 0; }
        .nav-menu a { justify-content: center; padding: 15px; }
        .user-profile { display: none; }
        
        /* Page Styles */
        .course-hero {
            background: linear-gradient(135deg, #0B3D2E 0%, #1FC166 100%);
            padding: 25px; /* Reduced from 40px */
            border-radius: 16px;
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(31, 193, 102, 0.2);
            margin-bottom: 20px;
        }
        .hero-badge { background: #FFD700; color: #000; padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; }
        .course-layout { display: grid; grid-template-columns: 2fr 1fr; gap: 25px; align-items: start; }
        
        .content-box { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.03); margin-bottom: 20px; }
        .feature-list li { list-style: none; display: flex; gap: 10px; margin-bottom: 10px; color: #444; font-size: 0.9rem; }
        .feature-list i { color: #1FC166; font-size: 1.1rem; }

        .buy-card { background: white; padding: 25px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); position: sticky; top: 20px; border: 1px solid #eee; }
        .price-tag { font-size: 2rem; font-weight: 800; color: #0B3D2E; }
        .discount-text { text-decoration: line-through; color: #888; font-size: 1rem; }
        
        .back-btn {
            position: absolute; top: 20px; left: 20px;
            background: rgba(255,255,255,0.2); color: white;
            padding: 8px 15px; border-radius: 20px; text-decoration: none;
            font-size: 0.8rem; font-weight: 600; backdrop-filter: blur(5px);
            display: flex; align-items: center; gap: 5px;
        }
        .back-btn:hover { background: white; color: #0B3D2E; }
    </style>
</head>
<body>

    <div class="app-container">
        <!-- Mini Sidebar -->
        <aside class="sidebar">
            <div class="kiit-logo-wrapper" style="width:40px; height:40px;"><img src="images/sidebar-logo.png"></div>
            <nav class="nav-menu" style="margin-top: 20px;">
                <a href="index.html" title="Back to Home"><i class="ph-bold ph-house"></i></a>
                <a href="#" title="Courses"><i class="ph-bold ph-graduation-cap"></i></a>
            </nav>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <div id="loading" style="margin-top: 50px; color:white;">Loading...</div>

            <div id="course-content" style="display: none; width: 100%;">
                
                <!-- HERO -->
                <div class="course-hero">
                    <a href="index.html" class="back-btn"><i class="ph-bold ph-arrow-left"></i> Home</a>
                    <div style="margin-top: 40px;">
                        <span class="hero-badge" id="c-cat">Category</span>
                        <h1 id="c-title" style="font-size: 2.2rem; margin: 10px 0;">Course Title</h1>
                        <p style="opacity: 0.9; max-width: 600px; font-size: 1rem; line-height: 1.5;" id="c-desc">Short description...</p>
                        <div style="margin-top: 20px; display: flex; gap: 15px; font-size: 0.9rem;">
                            <span><i class="ph-fill ph-star" style="color: #FFD700;"></i> 4.8</span>
                            <span><i class="ph-fill ph-users"></i> <span id="c-enrolled">0</span> Enrolled</span>
                            <span><i class="ph-fill ph-globe"></i> English</span>
                        </div>
                    </div>
                </div>

                <div class="course-layout">
                    <!-- DETAILS -->
                    <div>
                        <div class="content-box">
                            <h3 style="margin-bottom: 15px; color:#0B3D2E;">What you'll learn</h3>
                            <ul class="feature-list">
                                <li><i class="ph-bold ph-check-circle"></i> Industry-ready skills and tools.</li>
                                <li><i class="ph-bold ph-check-circle"></i> Real-world project experience.</li>
                                <li><i class="ph-bold ph-check-circle"></i> Certification upon completion.</li>
                            </ul>
                        </div>
                        <div class="content-box">
                            <h3 style="margin-bottom: 15px; color:#0B3D2E;">Description</h3>
                            <p id="c-long-desc" style="line-height: 1.7; color: #555;">Details...</p>
                        </div>
                    </div>

                    <!-- BUY CARD -->
                    <div>
                        <div class="buy-card">
                            <div style="margin-bottom: 15px;">
                                <span class="price-tag" id="c-price">₹0</span>
                                <span class="discount-text" id="c-old-price">₹1999</span>
                                <span style="color:#166534; font-weight:700; font-size:0.9rem; margin-left:8px;">80% OFF</span>
                            </div>
                            <button class="btn-primary" style="width: 100%; padding: 12px; font-size: 1rem;" onclick="startCheckout()">Buy Now</button>
                            <p style="text-align:center; font-size:0.75rem; color:#888; margin-top:10px;">30-Day Money-Back Guarantee</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const params = new URLSearchParams(window.location.search);
            const courseId = params.get('id');
            if(!courseId) { window.location.href = 'index.html'; return; }

            try {
                const res = await fetch('/api/auth/courses');
                const data = await res.json();
                if(data.success) {
                    const course = data.courses.find(c => c.id === courseId);
                    if(course) {
                        document.getElementById('c-title').innerText = course.title;
                        document.getElementById('c-cat').innerText = course.category;
                        document.getElementById('c-desc').innerText = course.description || "Master this skill today.";
                        document.getElementById('c-long-desc').innerText = (course.description || "No details provided.") + " This course includes comprehensive modules, quizzes, and live projects.";
                        document.getElementById('c-price').innerText = "₹" + course.price;
                        document.getElementById('c-old-price').innerText = "₹" + (parseInt(course.price) * 1.5).toFixed(0);
                        document.getElementById('c-enrolled').innerText = course.students_enrolled || 120;
                        
                        document.getElementById('loading').style.display = 'none';
                        document.getElementById('course-content').style.display = 'block';
                    }
                }
            } catch(e) { console.error(e); }
        });
        function startCheckout() { alert("Redirecting to Payment Gateway..."); }
    </script>
</body>
</html>